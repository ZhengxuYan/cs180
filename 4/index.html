<!DOCTYPE HTML>
<html>
    <head>
        <title>Project 4 - Jason Yan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="../assets/css/main.css" />
    </head>
    <body class="is-preload">
        <!-- Header -->
        <section id="header">
            <header>
                <p id="logo"><a href="../index.html">Back to Main Page</a></p>
                <h2>CS 180 Project 4</h2>
            </header>
            <nav id="nav">
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#part1">Part A1: Shoot the Pictures</a></li>
                    <li><a href="#part2">Part A2: Recover Homographies</a></li>
                    <li><a href="#part3">Part A3: Warp the Images</a></li>
                    <li><a href="#part4">Part A4: Image Rectification</a></li>
                    <li><a href="#part5">Part A5: Blending the Images into a Mosaic</a></li>
                    <li><a href="#part6">Part B1: Harris Interest Point Detector</a></li>
                    <li><a href="#part7">Part B2: ANMS</a></li>
                    <li><a href="#part8">Part B3: Feature Descriptor Extraction</a></li>
                    <li><a href="#part9">Part B4: Feature Matching</a></li>
                    <li><a href="#part10">Part B5: RANSAC</a></li>
                    <li><a href="#part11">Part B6: Results</a></li>
                </ul>
            </nav>
            <footer>
                <ul class="icons">
                    <li><a href="https://zhengxuyan.github.io" class="icon solid fa-globe"><span class="label">Website</span></a></li>
                    <li><a href="https://linkedin.com/in/zhengxu-yan" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
                    <li><a href="https://github.com/ZhengxuYan" class="icon brands fa-github"><span class="label">Github</span></a></li>
                    <li><a href="mailto:jason.yan@berkeley.edu" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
                </ul>
            </footer>
        </section>

        <!-- Wrapper -->
        <div id="wrapper">
            <!-- Main -->
            <div id="main">
                <!-- Overview -->
                <section id="overview">
                    <div class="container">
                        <header class="major">
                            <h3>Project 4: Image Mosaicing</h3>
                        </header>
                        <p>
                            In this project, we initially took many photos, each set containing a significant portion that 
                            overlaps with others. We can use these overlapping sections to stitch the photos together, 
                            forming a larger image. To achieve this, we need to first identify the corresponding points 
                            between these photos and then perform projection warping. We can use this warping technique
                            for other purposes, such as image rectification, which projects an object that is not facing 
                            forward in the photo to appear as if it is facing forward, allowing us to view the object from 
                            different angles. Afterwards, we can also use blending to combine many photos into one larger image.
                        </p>
                    </div>
                </section>

                <!-- Part A Divider -->
                <section id="partA-divider" style="padding: 1em 0;">
                    <div class="container">
                        <header class="major" style="margin-bottom: 1em;">
                            <h2 style="text-align: center; border-bottom: 2px solid #888; padding-bottom: 0.5em; font-size: 1.5em;">Part A: Manual Feature Selection and Image Mosaicing</h2>
                        </header>
                        <p style="text-align: center; margin: 0;">
                            In this part, we implement image mosaicing using manual feature selection to understand the fundamental concepts of homography and image warping.
                        </p>
                    </div>
                </section>

                <!-- Part 1 -->
                <section id="part1">
                    <div class="container">
                        <header class="major">
                            <h3>Part A1: Shoot the Pictures</h3>
                        </header>
                        <p>
                            First, I took these sets of photos simultaneously. I also made sure to keep the center of projection (COP) fixed, which ensures that the transforms between them are projective. Additionally, each set of photos has a large overlapping area, allowing us to use these overlapping sections to stitch the photos together and form a larger image.
                        </p>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <p>These are the photos I took in my apartment: </p>
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/apt_left.jpg" alt="Apt Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/apt_right.jpg" alt="Apt Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Right</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <p>These are the photos of the Bay St Mall: </p>
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/bayst_left.jpg" alt="Bayst Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Bay St Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/bayst_right.jpg" alt="Bayst Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Bay St Right</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <p>These are the photos I took in the hallway: </p>
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/hall_left.jpg" alt="Hall Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Hall Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/hall_right.jpg" alt="Hall Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Hall Right</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 2 -->
                <section id="part2">
                    <div class="container">
                        <header class="major">
                            <h3>Part A2: Recover Homographies</h3>
                        </header>
                        <p>Before implementing warping, we need to first identify corresponding points between the images. Since there are many overlapping areas in the two pictures, I found objects that appear in both images and used the 
                            tool from <a href="https://cal-cs180.github.io/fa23/hw/proj3/tool.html" target="_blank">Project 3</a> to mark their corresponding points.</p>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/apt_corr.png" alt="Apt Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Left</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/bayst_corr.png" alt="Bayst Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Bay St Left</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/hall_corr.png" alt="Hall Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Hall Left</p> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p>
                            Before warping, we need to recover the parameters of the transformation between each pair of images. Our transformation here is a homography: \( p' = Hp \), where \( H \) is a 3x3 matrix with 8 degrees of freedom (scaling factor set to 1). According to the formula from Lecture 11, slide 42:
                            \[
                            \begin{bmatrix}
                            a & b & c \\
                            d & e & f \\
                            g & h & 1
                            \end{bmatrix}
                            \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}
                            =
                            \begin{bmatrix} wx' \\ wy' \\ w \end{bmatrix}
                            \]
                            As long as we have more than 8 \((x,y,x',y')\) point pairs, we can solve for \(H\), like this:
                            \[
                            \begin{align*}
                            &\begin{cases}
                            ax + by + c = wx' \\
                            dx + ey + f = wy' \\
                            gx + hy + 1 = w
                            \end{cases}
                            \\
                            \implies
                            &\begin{cases}
                            ax + by + c - gxx' - hyx' = x' \\
                            dx + ey + f - gxy' - hyy' = y'
                            \end{cases}
                            \\
                            \implies
                            &\begin{bmatrix}
                            x & y & 1 & 0 & 0 & 0 & -xx' & -yx' \\
                            0 & 0 & 0 & x & y & 1 & -xy' & -yy' \\
                            \end{bmatrix}
                            \begin{bmatrix} a \\ b \\ c \\ d \\ e \\ f \\ g \\ h \end{bmatrix}
                            =
                            \begin{bmatrix} x' \\ y' \end{bmatrix}
                            \end{align*}
                            \]
                            Specifically, we stack all the \((x,y,x',y')\) point pairs into matrix \(A\) layer by layer, and stack all the \(x'\) and \(y'\) into matrix \(B\) layer by layer. Then we used `np.linalg.lstsq` to solve this linear equation system to get the least squares solution. Reshape this solution into a 3x3 matrix, and that's our \(H\).
                        </p>
                    </div>
                </section>

                <!-- Part 3 -->
                <section id="part3">
                    <div class="container">
                        <header class="major">
                            <h3>Part A3: Warp the Images</h3>
                        </header>
                        <p>After calculating the homographies, we utilize them to warp the images effectively. Specifically, we use the homography matrix 
                            𝐻 to re-project one image onto the canvas of another. This process involves creating a coordinate grid for the destination image 
                            and then transforming each coordinate through the homography to find the corresponding points in the source image. Bilinear 
                            interpolation is then applied to fill in the pixel values in the destination image.
                            Here's how this works in practice: Initially, we determine the bounding box of the final image by applying the homography to the four corners of 
                            the first image to project it onto the second. This outlines the area where the final image will reside. We then use 
                            scipy.interpolate.RegularGridInterpolator to interpolate the pixel values from the source image and map them onto the 
                            destination image. Because the coordinates after warping may be negative, we will shift this grid to ensure all coordinates are positive. 
                            Also, we can use this shift for alignment later.</p>
                            <div class="row">
                                <div class="col-12 col-12-medium">
                                    <div class="row">
                                        <div class="col-12">
                                            <span class="image fit"><img src="media/partA_images/apt_corr.png" alt="Apt Left" /></span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <span class="image fit"><img src="media/partA_images/warped_apt_left.png" alt="Warped Apt Left" /></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </section>

                <!-- Part 4 -->
                <section id="part4">
                    <div class="container">
                        <header class="major">
                            <h3>Part A4: Image Rectification</h3>
                        </header>
                        <p>
                            Using the same method, we can achieve Image Rectification. First, I took several photos that contain rectangular objects, but they are not necessarily rectangular in the photos. First, we still need to mark the rectangular objects in these photos. I marked four points on each rectangular object, but since we only have one photo and we just want to rectify it, the corresponding points for the second image are designed by myself, such as (0,0), (0,1), (1,0), and (1,1). Then, using the method described above, we calculate the homography matrix and perform the warp. This way, we can rectify any image or view the object from different angles.
                        </p>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/cs189_rectified.png" alt="Rectify CS189" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/monitor_rectified.png" alt="Rectify Monitor" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 5 -->
                <section id="part5">
                    <div class="container">
                        <header class="major">
                            <h3>Part A5: Crafting the Image Mosaic</h3>
                        </header>
                        <p>
                            After warping the images, we can blend them into a mosaic. Specifically, we can use the homography matrix to warp the images onto a canvas of another image, and then we can use the shift to align the images. After warping, we can use the blending technique to combine the images into one larger image.
                            Here's how we can do this:
                        </p>
                        <ol>
                            <li><strong>Warping and Aligning:</strong> We begin by applying a homography matrix to the first image to warp it appropriately. This results in a transformed image and an alpha mask. We also track how much we need to shift this image to align perfectly with the second image.</li>
                            <li><strong>Determining Mosaic Dimensions:</strong> Next, we calculate the dimensions needed for the mosaic canvas to ensure that it can accommodate both images fully without any clipping.</li>
                            <li><strong>Image Placement:</strong> Each image is positioned on its designated canvas. Adjustments based on previously calculated shifts are made to align them perfectly.</li>
                            <li><strong>Distance Transformation:</strong> A Euclidean distance transform is applied to both masks. This transform measures the distance of each pixel to the nearest boundary, influencing the blending behavior by giving less weight to boundary pixels.</li>
                            <li><strong>Two-band Blending:</strong> The images undergo a blurring process to separate high and low-frequency details. Low-resolution components are blended using weighted averaging based on the alpha masks (we use distance transformation as the alpha mask).
                                High-resolution components are blended using a decision-based approach where pixels from the image with the higher distance transform value at each location are chosen.
                            </li>
                        </ol>
                        <p>
                            These are the results of the mosaic:
                        </p>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/apt_left.jpg" alt="Apt Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Apt Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/apt_right.jpg" alt="Apt Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Apt Right</p> -->
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/apt_masks.png" alt="Apt Masks" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Apt Masks</p> -->
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/apt_res.png" alt="Apt Res" /></span>
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/apt_mosaic.png" alt="Apt Mosaic" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/bayst_left.jpg" alt="Bayst Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Bay St Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/bayst_right.jpg" alt="Bayst Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Bay St Right</p> -->
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/bayst_masks.png" alt="Bayst Masks" /></span>
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/bayst_res.png" alt="Bayst Res" /></span>
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/bayst_mosaic.png" alt="Bayst Mosaic" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-12-medium">
                                <p>These are the photos I took in the hallway: </p>
                                <div class="row">
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/hall_left.jpg" alt="Hall Left" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Hall Left</p> -->
                                    </div>
                                    <div class="col-6">
                                        <span class="image fit"><img src="media/partA_images/hall_right.jpg" alt="Hall Right" /></span>
                                        <!-- <p class="caption" style="text-align: center;">Hall Right</p> -->
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/hall_masks.png" alt="Hall Masks" /></span>
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/hall_res.png" alt="Hall Res" /></span>
                                    </div>
                                    <div class="col-12">
                                        <span class="image fit"><img src="media/partA_images/hall_mosaic.png" alt="Hall Mosaic" /></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part B Divider -->
                <section id="partB-divider" style="padding: 1em 0;">
                    <div class="container">
                        <header class="major" style="margin-bottom: 1em;">
                            <h2 style="text-align: center; border-bottom: 2px solid #888; padding-bottom: 0.5em; font-size: 1.5em;">Part B: Automatic Feature Detection and Matching</h2>
                        </header>
                        <p style="text-align: center; margin: 0;">
                            In this part, we implement automatic feature detection and matching to create image mosaics without manual point selection.
                        </p>
                    </div>
                </section>

                <!-- Part 6 -->
                <section id="part6">
                    <div class="container">
                        <header class="major">
                            <h3>Part B1: Harris Interest Point Detector</h3>
                        </header>
                        <p>
                            Firstly, in order to find the interest points, we would like to focus on the "corners" of the image. To find these corners, we use the Harris interest point detector, which identifies points where the image has strong gradients in multiple directions. Using the implementation from <a href="https://inst.eecs.berkeley.edu/~cs180/fa24/hw/proj4/harris.py">harris.py</a>, we
                            set σ=1 for the Gaussian smoothing and min_distance=1 to make the detected peaks to be at least one pixel apart. The function returns both the Harris response values (h-values) for each pixel and the coordinates of detected interest points. These points represent locations in the image where there are significant changes in intensity in multiple directions, making them good candidates for feature matching.
                            Here is the Harris Matrix and the detected interest points for one of the images:
                        </p>
                        <div class="row">
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/hall_h.png" alt="Harris Matrix" /></span>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/hall_harris.png" alt="Harris Interest Points" /></span>
                                <p style="text-align: center;">Number of Harris corners: 11607(Left), 11583(Right)</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 7 -->
                <section id="part7">
                    <div class="container">
                        <header class="major">
                            <h3>Part B2: Adaptive Non-Maximum Suppression (ANMS)</h3>
                        </header>
                        <p>
                            After applying the Harris corner detector, we often get too many interest points that are heavily clustered. This clustering can be problematic as it provides redundant information and doesn't give us a good spatial distribution of features across the image. To address this, we implement Adaptive Non-Maximum Suppression (ANMS) based on the <a href="https://inst.eecs.berkeley.edu/~cs180/fa24/hw/proj4/Papers/MOPS.pdf">Multi-Image Matching using Multi-Scale Oriented Patches</a> paper.
                        </p>
                        <p>
                            The ANMS algorithm works as follows:
                        </p>
                        <ol>
                            <li>For each interest point p, we find its "suppression radius" r, which is:
                                <ul>
                                    <li>The minimum distance to any other point q where H(q) > c_robust * H(p)</li>
                                    <li>Here, H(p) is the Harris response at point p</li>
                                    <li>c_robust (set to 0.9) helps ensure robustness to noise</li>
                                </ul>
                            </li>
                            <li>We use a k-d tree data structure to efficiently find nearby points within a radius of 24 pixels</li>
                            <li>Points with larger suppression radii are better because they are far from stronger interest points</li>
                            <li>Finally, we select the top 100 points with the largest suppression radii</li>
                        </ol>
                        <p>
                            This approach ensures that:
                        </p>
                        <ul>
                            <li>Selected points are well-distributed across the image</li>
                            <li>We maintain only the strongest interest points in any local region</li>
                            <li>The final set of points is more suitable for feature matching</li>
                        </ul>
                        <p></p>
                            Here is the ANMS results for one of the images:
                        </p>
                        <div class="row">
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/hall_anms.png" alt="ANMS Results" /></span>
                                <p style="text-align: center;">Number of Interest Points After ANMS: 100</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 8 -->
                <section id="part8">
                    <div class="container">
                        <header class="major">
                            <h3>Part B3: Feature Descriptor Extraction</h3>
                        </header>
                        <p>
                            For each interest point, we extract a feature descriptor that captures the local image appearance according to the paper. We only consider the axis-aligned features according to the instructions. The process is as follows:
                        </p>
                        <ol>
                            <li>Extract a 40×40 pixel patch centered at each interest point</li>
                            <li>Apply Gaussian blur (σ=2) to avoid aliasing</li>
                            <li>Subsample to 8×8 patches (spacing = 5 pixels)</li>
                            <li>Normalize and flatten the descriptor (μ=0, σ=1):
                                <ul>
                                    <li>Subtract mean</li>
                                    <li>Divide by standard deviation</li>
                                </ul>
                            </li>
                        </ol>
                        <p></p>
                            Here is the extracted feature patches of the hallway image before normalization:
                        </p>
                        <div class="row">
                            <div class="col-6">
                                <span class="image fit"><img src="media/partB_images/hall_features.png" alt="Feature Descriptors" /></span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 9 -->
                <section id="part9">
                    <div class="container">
                        <header class="major">
                            <h3>Part B4: Feature Matching</h3>
                        </header>
                        <p>
                            With features extracted, the next step is to match features together between two images to form correspondences. Our matching process uses several techniques to ensure accuracy:
                        </p>
                        <ol>
                            <li>Distance Computation:
                                <ul>
                                    <li>Compute pairwise distances between all feature descriptors from both images</li>
                                    <li>Create two distance matrices for bidirectional matching</li>
                                </ul>
                            </li>
                            <li>Outlier Reduction:
                                <ul>
                                    <li>Apply Lowe's ratio test: for each feature, find its two closest matches and compare their distances</li>
                                    <li>Only accept matches where closest/second-closest distance ratio is below 0.8</li>
                                    <li>Implement cross-checking: ensure matches are reciprocal between both images</li>
                                </ul>
                            </li>
                        </ol>
                        <p>
                            Below is an illustration of the feature matching results. The visualization shows matches between the two images, with red points in the left image connected to corresponding blue points in the right image via green lines. Each line represents a match that passed both the ratio test and cross-checking criteria.
                        </p>
                        <div class="row">
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/feature_match0.8.png" alt="Feature Match Results r = 0.8" /></span>
                                <p style="text-align: center;">Feature matching with ratio threshold = 0.8</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/feature_match1.png" alt="Feature Match Results r = 1" /></span>
                                <p style="text-align: center;">Feature matching with ratio threshold = 1</p>
                            </div>
                        </div>
                        <p>
                            We can see that when the ratio threshold is larger, we get more matches, but also more outliers and incorrect matches. So I choose the ratio threshold = 0.8 for the rest of the experiments.
                        </p>
                    </div>
                </section>

                <!-- Part 10 -->
                <section id="part10">
                    <div class="container">
                        <header class="major">
                            <h3>Part B5: RANSAC</h3>
                        </header>
                        <p>
                            While Lowe's ratio test helps filter out many incorrect matches, some mismatched pairs typically remain. These incorrect correspondences pose a significant problem because the least-squares method is sensitive to outliers - even a few incorrect matches can significantly distort the computed homography matrix.
                        </p>
                        <p>
                            To solve this issue, we implement RANSAC (Random Sample Consensus), an iterative method that works by repeatedly selecting small random subsets of matches (size of 4) to compute potential homographies. For each iteration, we track how many other point pairs align well with the current transformation (determined based on whether the difference in distance is below a certain threshold). Through many iterations, we identify the homography that best explains the majority of the matches, effectively filtering out the outlier pairs that don't fit the dominant geometric relationship between the images.
                        </p>
                        <p>
                            The RANSAC algorithm implementation involves:
                        </p>
                        <ol>
                            <li>Randomly selecting 4 matching pairs</li>
                            <li>Computing homography H from these pairs</li>
                            <li>Transforming all points using H and counting inliers (points with transformation error < threshold)</li>
                            <li>Repeating for many iterations (2,000,000 in our implementation)</li>
                            <li>Keeping the H that produces the most inliers</li>
                        </ol>
                        <p>
                            The visualizations below show the matches that RANSAC identified as reliable. The red points in the left image are connected to their matching blue points in the right image via green lines. These connections represent the inlier matches that RANSAC determined were consistent with the best-fitting homography transformation. And the red lines are the incorrect matches that RANSAC filtered out.
                        </p>
                        <div class="row">
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/RANSAC5.png" alt="RANSAC Results threshold = 5" /></span>
                                <p style="text-align: center;">RANSAC results with threshold = 5</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 11 -->
                <section id="part11">
                    <div class="container">
                        <header class="major">
                            <h3>Part B6: Results</h3>
                        </header>
                        <p>
                            Using the automated feature detection and matching pipeline, we can create image mosaics without manual point selection. Below are the results for each photo set:
                        </p>
                        
                        <!-- Apartment Photos -->
                        <h4>Apartment Photo Set</h4>
                        <div class="row">
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/apt_left.jpg" alt="Apt Left" /></span>
                                <p style="text-align: center;">Original Left Image</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/apt_right.jpg" alt="Apt Right" /></span>
                                <p style="text-align: center;">Original Right Image</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/apt_ransac.png" alt="Apt RANSAC" /></span>
                                <p style="text-align: center;">RANSAC Results</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partB_images/apt_mosaic(automatic).png" alt="Apt Final Mosaic (Automatic)" /></span>
                                <p style="text-align: center;">Apartment Final Mosaic (Automatic)</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/apt_mosaic.png" alt="Apt Final Mosaic (Manual)" /></span>
                                <p style="text-align: center;">Apartment Final Mosaic (Manual)</p>
                            </div>
                        </div>

                        <!-- Bay Street Photos -->
                        <h4>Bay Street Photo Set</h4>
                        <div class="row">
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/bayst_left.jpg" alt="Bayst Left" /></span>
                                <p style="text-align: center;">Original Left Image</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/bayst_right.jpg" alt="Bayst Right" /></span>
                                <p style="text-align: center;">Original Right Image</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/bayst_ransac.png" alt="Bayst RANSAC" /></span>
                                <p style="text-align: center;">RANSAC Results</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partB_images/bayst_mosaic(automatic).png" alt="Bayst Final Mosaic (Automatic)" /></span>
                                <p style="text-align: center;">Bay Street Final Mosaic (Automatic)</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/bayst_mosaic.png" alt="Bayst Final Mosaic (Manual)" /></span>
                                <p style="text-align: center;">Bay Street Final Mosaic (Manual)</p>
                            </div>
                        </div>

                        <!-- Hallway Photos -->
                        <h4>Hallway Photo Set</h4>
                        <div class="row">
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/hall_left.jpg" alt="Hall Left" /></span>
                                <p style="text-align: center;">Original Left Image</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/hall_right.jpg" alt="Hall Right" /></span>
                                <p style="text-align: center;">Original Right Image</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/RANSAC5.png" alt="Hall RANSAC" /></span>
                                <p style="text-align: center;">RANSAC Results</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partB_images/hall_mosaic(automatic).png" alt="Hall Final Mosaic (Automatic)" /></span>
                                <p style="text-align: center;">Hall Final Mosaic (Automatic)</p>
                            </div>
                            <div class="col-6">
                                <span class="image fit"><img src="media/partA_images/hall_mosaic.png" alt="Hall Final Mosaic (Manual)" /></span>
                                <p style="text-align: center;">Hall Final Mosaic (Manual)</p>
                            </div>
                        </div>

                        <p> We can take any images that have the same COP and use the same pipeline to create a mosaic for them. I just took the photos of my desk and created a mosaic for them automatically.</p>
                        <div class="row">
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/desk_ransac.png" alt="Desk RANSAC" /></span>
                                <p style="text-align: center;">Desk RANSAC Results</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/desk_transform.png" alt="Desk Transform" /></span>
                                <p style="text-align: center;">Desk Transform</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/desk_res.png" alt="Desk High Resolution and Low Resolution" /></span>
                                <p style="text-align: center;">Desk High Resolution and Low Resolution</p>
                            </div>
                            <div class="col-12">
                                <span class="image fit"><img src="media/partB_images/desk_mosaic(automatic).png" alt="Desk Final Mosaic (Automatic)" /></span>
                                <p style="text-align: center;">Desk Final Mosaic (Automatic)</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Scripts -->
        <script src="../assets/js/jquery.min.js"></script>
        <script src="../assets/js/jquery.scrollex.min.js"></script>
        <script src="../assets/js/jquery.scrolly.min.js"></script>
        <script src="../assets/js/browser.min.js"></script>
        <script src="../assets/js/breakpoints.min.js"></script>
        <script src="../assets/js/util.js"></script>
        <script src="../assets/js/main.js"></script>
        <!-- Load MathJax -->
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>
